version: 2
updates:
  # .NET Dependencies
  - package-ecosystem: "nuget"
    directory: "/"
    schedule:
      interval: "daily"
      time: "09:00"
    open-pull-requests-limit: 10
    groups:
      # .NET Aspire orchestration stack (critical, grouped together)
      aspire:
        patterns:
          - "Aspire.*"
        update-types:
          - "minor"
          - "patch"
      
      # Wolverine + Marten messaging & database stack (tightly coupled)
      wolverine-marten:
        patterns:
          - "WolverineFx.*"
          - "Marten*"
          - "Npgsql*"
          - "AspNetCore.HealthChecks.NpgSql"
        update-types:
          - "minor"
          - "patch"
      
      # AWS infrastructure (S3, LocalStack)
      aws:
        patterns:
          - "AWSSDK.*"
          - "LocalStack.*"
        update-types:
          - "minor"
          - "patch"
      
      # Logging & observability
      observability:
        patterns:
          - "Serilog*"
          - "OpenTelemetry.*"
        update-types:
          - "minor"
          - "patch"
      
      # Image processing
      image-processing:
        patterns:
          - "SkiaSharp*"
        update-types:
          - "minor"
          - "patch"
      
      # Testing framework & tools
      testing:
        patterns:
          - "xunit*"
          - "Testcontainers*"
          - "Microsoft.NET.Test.Sdk"
          - "NetArchTest.*"
        update-types:
          - "minor"
          - "patch"
      
      # Microsoft core packages (ASP.NET, Extensions, etc.)
      microsoft:
        patterns:
          - "Microsoft.*"
        exclude-patterns:
          - "Microsoft.NET.Test.Sdk"
        update-types:
          - "minor"
          - "patch"
    labels:
      - "dependencies"
      - "dotnet"
    reviewers:
      - "saxolotl"
    commit-message:
      prefix: "chore"
      include: "scope"

  # GitHub Actions
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "daily"
      time: "09:00"
    groups:
      github-actions:
        patterns:
          - "*"
        update-types:
          - "minor"
          - "patch"
    labels:
      - "dependencies"
      - "github-actions"
    reviewers:
      - "saxolotl"
    commit-message:
      prefix: "ci"

  # Docker
  - package-ecosystem: "docker"
    directory: "/Nexus.Api"
    schedule:
      interval: "daily"
      time: "09:00"
    groups:
      docker:
        patterns:
          - "*"
        update-types:
          - "minor"
          - "patch"
    labels:
      - "dependencies"
      - "docker"
    reviewers:
      - "saxolotl"
    commit-message:
      prefix: "chore"

  - package-ecosystem: "docker"
    directory: "/Nexus.ImageProcessor"
    schedule:
      interval: "daily"
      time: "09:00"
    groups:
      docker:
        patterns:
          - "*"
        update-types:
          - "minor"
          - "patch"
    labels:
      - "dependencies"
      - "docker"
    reviewers:
      - "saxolotl"
    commit-message:
      prefix: "chore"

